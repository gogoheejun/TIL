jwt를 이해하기 전에 TCP를 알아야 함

# OSI 7계층

물데네트세프응

게임에서 내가 궁을 썼다 치자.

- 응용계층

롤-궁

- 프레젠테이션 계층

궁이란 데이터가 암호화됨(궁이 아니라 비번같은걸 보낼수도 있으니),
압축도 함(사진같은거 보낼 때)

- 세션 계층

인증 체크(상대방이 켜져있는지, 또 그 상대방에 내가 접근할수있는지)

- 트랜스포트 계층

TCP할지 UDP할지 결정

TCP란 간단히 말해, 내가 상대방에게 안녕이란 데이터를 보내면 상대방은 나에게 Ack(acknowledge)를 보내서 받았다고확인, 난 Ack를 기다리다가 받으면 다음 데이터를 보냄. 만약 Ack가 유실되거나 통신이 끊기거나 하면 난 기다리다가 다시 안녕이란 데이터를 보냄. 고로 신뢰성있음. 잘 도착했는지 안 했는지 계속 확인하니까

UDP란 Ack따위 확인 안하고 걍 내가 계속 데이터 보내는 것임. 안녕, 반가워, 난, 희준이야, 걍 계속 보냄. 신뢰성은 없지만 속도가 빠름. 전화할 때 씀(중간에 잠깐 지지직거려도 상대방은 다 이해하니까). 동영상도 udp가능(중간에 사진1장,2장 없어도 동영상 재생에 큰 지장 없으니깐)

그러나 **아이디,비밀번호는 UDP 못함**. TCP로 해야 함. 중간에 비번 숫자 하나 날라가면 안되잖아

즉, 사람이 받는건 UDP함 대충 다 이해하니깐. 근데 웹통신은 TCP를 함

- 네트워크 계층

IP를 결정함. ip 알아야 상대찾지

- 데이터링크 계층-여기부턴 LAN통신 담당(근거리)

IP로 상대를 찾아갔는데, 상대 공유기에 있는 특정 목적지를 찾아줌

- 물리 계층

전기선

내가 상대에 메일을 보내면 응→물→상대방의 물→응 을 거침

# 보안-CIA

- 기밀성( C )

중간에 누가 낚아채면 기밀성이 깨짐

- 무결성(I)

낚아채가지고 조작하면 무결성이 깨짐

- 가용성(A)

저 조작한 정보를 보내면 가용성이 깨짐. 

위 조건이 성립해야 하는데, 그러려면 

1. 보내려는 데이터란 금고를 여는 열쇠를 서버에 전달해야 함
2. 누구로부터 문서가 왔는지 알려줘야 함.

위 두가지 조건이 만족하면, 중간에서 딴사람이 낚아채도 열쇠가 없기에 금고를 열 수 없고, 낚아채서 가짜문서를 보내려 해도 서버와 클라이언트는 그 문서가 누구로부터 왔는지 확인할 수 있게 되서 안속음

# RSA

public key(공개키)와 private key(개인키)가 있음

공개키로 잠근건 개인키로 열수 있고, 개인키로 잠근건 공개키로 열 수 있음.

상황1:

A가 B한테 사랑해라는 메시지를 보내고 싶어

A는 a공개키, a개인키를 가지고 있고, B는 b공개키, b개인키를 가지고 있음. 공개키는 블로그같은데다가 올려놔도 괜찮음. 개인키는 무조건 자기만 가지고 있어야함

A는 b공개키를 다운받아서(공개니까 다운가능) 사랑해를 암호화시킴. 근데 b공개키로 잠근건 b개인키로만 열 수 있음. 해커가 b개인키를 가지고 있지 않으므로 열수없어!

→CIA에서의 1번문제해결

상황2:

A가 B에게 메시지(C가 너한테 1억 송금했다)를 보내고싶어.

메시지를 a개인키로 잠그면, B는 a공개키로 열 수 있어. 이때 B는 저 메시지는 A한테 왔다고 확신할 수 있어. a공개키로 연거니까 a개인키로 잠근거고, a개인키는 A만 가지고 있으므로. 

→ 전자서명에 많이 활용됨→ 즉 CIA의 2번문제 해결

자 이제 종합!

A가 B에게 비번 1234를 보내고싶어.

b공개키로 1234를 잠가야 B만 볼 수있어. 근데 이러면 해커가 중간에 가로채서 비번 날려버리고 새로운 비먼을 B한테 보낼 수도 있음. 고로 A개인키로 한번더 잠가. 

→ 그럼 B는 문서를 받으면, 

1. a공개키로 연다→ 열리면 A가 보냈다고 확신가능(인증된것)
2. 열리면 b개인키로 연다→ 1234암호 풀 수있음.

![Untitled](https://user-images.githubusercontent.com/78577071/131011587-65aa19c0-20b8-4827-9146-50e1aa68ba60.png)
